# 🚀 CusHara Sentinel - セットアップ手順（最短5分）

## ✅ 現在の状態

- ✅ 依存関係インストール完了
- ✅ 環境変数ファイル作成完了
- ✅ 開発サーバー起動済み → http://localhost:8080

## 📋 次のステップ

データベースをセットアップして、すぐに使い始めましょう！

---

## 方法1: オンラインSupabase（推奨・最も簡単）

### ステップ1: Supabaseアカウント作成（1分）

1. https://supabase.com にアクセス
2. 「Start your project」をクリック
3. GitHubまたはメールでサインアップ

### ステップ2: プロジェクト作成（2分）

1. 「New project」をクリック
2. 以下を入力：
   - **Name**: `cushara-sentinel`
   - **Database Password**: 強力なパスワード（保存しておく）
   - **Region**: `Northeast Asia (Tokyo)`
   - **Plan**: Free
3. 「Create new project」をクリック
4. 1-2分待つ

### ステップ3: データベースセットアップ（1分）

1. 左サイドバーの **SQL Editor** を開く
2. 「New query」をクリック
3. プロジェクトフォルダの `supabase/setup_all_in_one.sql` ファイルを開く
4. **すべての内容をコピー**
5. SQLエディタに貼り付け
6. 右下の「**Run**」をクリック
7. ✅ "Success" と表示されればOK！

### ステップ4: API設定の取得（30秒）

1. 左サイドバーの **Settings** → **API** を開く
2. 以下をコピー：
   - **Project URL**（例: `https://xxxxx.supabase.co`）
   - **anon public** key（長い文字列）

### ステップ5: 環境変数の設定（30秒）

1. プロジェクトフォルダの `.env.local` を開く
2. 以下のように編集：

```env
VITE_SUPABASE_URL=コピーしたProject URL
VITE_SUPABASE_ANON_KEY=コピーしたanon key
```

3. ファイルを保存

### ステップ6: テストユーザーの作成（1分）

Supabaseダッシュボードで：

1. **Authentication** → **Users** を開く
2. 「Add user」→「Create new user」をクリック
3. 入力：
   - **Email**: `admin@example.com`（または任意のメール）
   - **Password**: `Admin123!`（または任意の安全なパスワード）
   - ✅ **Auto Confirm User** にチェック
4. 「Create user」をクリック
5. 作成されたユーザーの **UUID**（ID）をコピー

### ステップ7: ユーザープロファイルの作成（30秒）

1. **SQL Editor** に戻る
2. 以下のSQLを実行（UUIDを置き換える）：

```sql
UPDATE public.users 
SET id = 'ここにコピーしたUUIDを貼り付け' 
WHERE email = 'admin@cushara-sentinel.jp';
```

3. 「Run」をクリック

### ステップ8: アプリケーションの起動

#### サーバーが起動していない場合：

```bash
npm run dev
```

#### すでに起動している場合：

1. ターミナルで **Ctrl + C** を押して停止
2. `npm run dev` で再起動

### ステップ9: ログイン 🎉

1. ブラウザで http://localhost:8080 を開く
2. ログイン情報を入力：
   - **Email**: `admin@example.com`（作成したメール）
   - **Password**: 設定したパスワード
3. 「ログイン」をクリック

✅ **成功！ダッシュボードが表示されます！**

---

## 方法2: ローカルSupabase（Docker必要）

### 必要なもの

- Docker Desktop for Windows
- 10GB以上の空きディスク容量

### セットアップ手順

1. **Docker Desktopをインストール**
   - https://www.docker.com/products/docker-desktop
   - インストール後、PCを再起動
   - Docker Desktopを起動

2. **Supabaseを起動**

```bash
npx supabase start
```

初回は5-10分かかります。完了すると以下が表示されます：

```
API URL: http://127.0.0.1:54321
DB URL: postgresql://postgres:postgres@127.0.0.1:54322/postgres
Studio URL: http://127.0.0.1:54323
anon key: eyJhbGci...（長い文字列）
```

3. **Supabase Studioを開く**
   - ブラウザで http://127.0.0.1:54323 にアクセス

4. **データベースセットアップ**
   - 方法1のステップ3と同じ手順で `setup_all_in_one.sql` を実行

5. **環境変数の確認**
   - `.env.local` がすでに正しく設定されています

6. **開発サーバーを起動**

```bash
npm run dev
```

7. **ログイン**
   - http://localhost:8080 にアクセス
   - Email: `admin@cushara-sentinel.jp`
   - Password: `admin123`

---

## 🎯 サンプルデータ

セットアップが完了すると、以下のサンプルデータが利用可能です：

### テストユーザー

| メール | パスワード | ロール |
|--------|-----------|--------|
| admin@cushara-sentinel.jp | admin123 | 管理者 |
| manager@cushara-sentinel.jp | manager123 | マネージャー |
| member@cushara-sentinel.jp | member123 | 一般ユーザー |

### サンプル事案

- 顧客からの執拗な電話対応
- メールでの人格否定的内容

これらをダッシュボードで確認できます！

---

## 🛠 トラブルシューティング

### "Invalid API key" エラー

- `.env.local` のキーを再確認
- 余分なスペースや改行がないか確認
- 開発サーバーを再起動

### ログインできない

1. Supabaseダッシュボードで **Authentication > Users** を確認
2. ユーザーが作成されているか確認
3. メールアドレスが正しいか確認
4. パスワードを再設定してみる

### ページが真っ白

1. ブラウザのコンソールを開く（F12キー）
2. エラーメッセージを確認
3. ターミナルのログを確認

### Dockerが起動しない

1. Docker Desktopが起動しているか確認
2. PCを再起動
3. Docker Desktopの設定で WSL2 が有効か確認

---

## 📚 次のステップ

セットアップが完了したら：

1. **ダッシュボードを探索**
   - 事案一覧を確認
   - AI分析結果を見る

2. **新しい事案を報告**
   - 「新規事案報告」をクリック
   - テストデータを入力

3. **ガイドを読む**
   - トップページの「ガイド」を開く
   - システムの使い方を理解

4. **追加ユーザーを作成**
   - 異なるロールのユーザーで動作確認

---

## 📞 サポート

問題が解決しない場合：

- Supabaseドキュメント: https://supabase.com/docs
- プロジェクトのissues: GitHubで報告

---

## 🎉 準備完了！

セットアップが完了しました。CusHara Sentinelをお楽しみください！

**アクセスURL**: http://localhost:8080


